---
description: 클린 아키텍처와 DDD 관점에서 코드를 분석하고 리뷰 문서를 작성합니다.
argument-hint: "[경로]"
---

# /review-architecture 커맨드

클린 아키텍처와 DDD 관점에서 코드를 분석하고 리뷰 문서를 작성합니다.

## 선행 작업 (필수)

이 커맨드를 실행하기 전에 **반드시** 다음 파일을 먼저 읽어야 합니다:

```
plugins/clean-architecture-ddd/skills/clean-architecture-ddd/SKILL.md
```

위 파일에 클린 아키텍처 체크리스트와 DDD 체크리스트의 상세 원칙이 정의되어 있습니다.

> **참조**: 체크리스트 상세 원칙은 [`clean-architecture-ddd` 스킬의 SKILL.md](../skills/clean-architecture-ddd/SKILL.md) 를 참조하세요.

## 사용법

```
/review-architecture [경로]
```

## 설명

지정된 경로(또는 현재 디렉토리)의 코드를 클린 아키텍처 및 DDD 원칙에 따라 분석하고, 잘 구현된 점과 개선이 필요한 점을 문서화합니다.

## 실행 단계

### 1단계: 구조 스캔

대상 경로의 전체 구조를 분석합니다:
- 디렉토리 및 파일 목록 스캔
- 레이어 구조 파악 (Domain, Application, Infrastructure, Presentation)
- 주요 클래스/모듈 식별

### 2단계: 클린 아키텍처 분석

[`clean-architecture-ddd` 스킬의 SKILL.md](../skills/clean-architecture-ddd/SKILL.md)의 **클린 아키텍처 체크리스트** 기준으로 분석:
- 의존성 방향 / Domain 독립성 / 레이어 분리 / 인터페이스 분리 / Use Case 분리

### 3단계: DDD 분석

[`clean-architecture-ddd` 스킬의 SKILL.md](../skills/clean-architecture-ddd/SKILL.md)의 **DDD 체크리스트** 기준으로 분석:
- Rich Domain Model / Value Object / Aggregate / Aggregate Root
- Domain Service / Repository / Domain Event / Ubiquitous Language

### 4단계: 강점 분석

잘 구현된 점 식별 (코드 예시 + 좋은 이유 설명)

### 5단계: 약점 분석

개선 필요 영역 식별 (문제 코드 + 위반 원칙 + 영향 설명)

### 6단계: 수정 방향 제안

우선순위별 분류:
- **높음 🔴**: 아키텍처 원칙 위반, 테스트 불가 구조
- **중간 🟡**: DDD 패턴 미적용, 책임 불명확
- **낮음 🟢**: 네이밍, 코드 정리, 문서화

### 7단계: 기대 효과 산출

개선 항목별 기대 효과 (테스트 용이성, 유지보수성, 확장성 등)

### 8단계: 리뷰 문서 출력

분석 결과를 아래 형식으로 출력합니다.

## 출력 형식

```markdown
# 아키텍처 리뷰: {대상명}

## 개요
- 분석 대상: {경로}
- 분석 일시: {YYYY-MM-DD HH:MM}
- 총 파일 수: {N}개
- 주요 레이어: {발견된 레이어 목록}

## 현재 구조 분석

### 디렉토리 구조
{트리 형태로 표현}

### 레이어 구성
{각 레이어별 역할과 포함된 주요 컴포넌트}

## 분석 결과 요약

| 영역 | 평가 | 비고 |
|-----|------|------|
| 의존성 방향 | ✅/⚠️/❌ | {설명} |
| Domain 독립성 | ✅/⚠️/❌ | {설명} |
| Entity 설계 | ✅/⚠️/❌ | {설명} |
| Value Object | ✅/⚠️/❌ | {설명} |
| Repository 패턴 | ✅/⚠️/❌ | {설명} |

## 잘 구현된 점 ✅

### 1. {강점 제목}
**위치**: `{파일 경로}`

{설명}

```{언어}
// 예시 코드
```

**좋은 이유**: {설명}

### 2. {강점 제목}
...

## 개선이 필요한 점 ⚠️

### 1. {약점 제목}
**위치**: `{파일 경로}`
**위반 원칙**: {CA/DDD 원칙명}

{문제점 설명}

```{언어}
// 문제가 되는 코드
```

**영향**: {영향 설명}

### 2. {약점 제목}
...

## 수정 방향 제안

### 높은 우선순위 🔴

#### 1. {개선 항목}
- **현재**: {현재 상태}
- **목표**: {개선 후 상태}
- **작업 내용**: {구체적인 작업}

### 중간 우선순위 🟡

#### 1. {개선 항목}
...

### 낮은 우선순위 🟢

#### 1. {개선 항목}
...

## 기대 효과

| 개선 항목 | 기대 효과 | 영향 범위 |
|----------|----------|----------|
| {항목1} | {효과} | {범위} |
| {항목2} | {효과} | {범위} |

## 권장 다음 단계

1. {첫 번째 권장 작업}
2. {두 번째 권장 작업}
3. {세 번째 권장 작업}

---
*이 리뷰는 클린 아키텍처와 DDD 원칙을 기준으로 작성되었습니다.*
```

## 예시

```
/review-architecture ./src/features/user-management
```

## 관련 커맨드

- `/refactor-feature [경로]` - 리뷰 결과를 바탕으로 특정 Feature 리팩토링
- `/refactor-project` - 프로젝트 전체 리팩토링 계획 수립

## 주의사항

- 리뷰는 코드 변경 없이 분석만 수행합니다
- 대규모 코드베이스의 경우 Feature 단위로 분할하여 리뷰를 권장합니다
- 리뷰 결과는 절대적인 기준이 아닌 개선 방향 제안입니다
- 프로젝트의 특성과 제약사항을 고려하여 개선 우선순위를 조정하세요
